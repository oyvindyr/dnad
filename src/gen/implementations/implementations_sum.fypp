#:def implementations_sum(dual_type, real_kind, number_of_derivatives) 
    pure function sum_d(u) result(res)
        type(${dual_type}$), intent(in) :: u(:)
        type(${dual_type}$) :: res
        integer :: i

        res%x = sum(u%x)
        do i = 1, ${number_of_derivatives}$
            res%dx(i) = sum(u%dx(i))
        end do

    end function sum_d
#:enddef 
